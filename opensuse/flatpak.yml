---
- name: Setup Flatpak and Install Apps
  hosts: localhost
  become_user: "{{ username }}"
  tasks:
    - name: install flatpak
      become: True
      become_user: root
      package:
        name: flatpak
        state: latest

    - name: add flathub remote
      flatpak_remote:
        name: flathub
        flatpakrepo_url: https://flathub.org/repo/flathub.flatpakrepo
        method: user

    - name: install Flatpak Apps
      flatpak:
        name: "{{ item }}"
        method: user
        with_items:
          - com.discordapp.Discord
          - com.getpostman.Postman
          - com.google.AndroidStudio
          - com.skype.Client
          - com.slack.Slack
          - com.visualstudio.code
          - org.audacityteam.Audacity
          - org.filezillaproject.Filezilla
          - org.gimp.GIMP
          - org.gnome.evince
          - org.libreoffice.LibreOffice
          - org.videolan.VLC

